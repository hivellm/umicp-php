# UMICP PHP SDK - Packagist Publishing Guide

## 📦 Package Information

- **Name**: `hivellm/umicp`
- **Version**: From Git tags (e.g., v0.1.3)
- **License**: MIT
- **PHP**: >= 8.1
- **Packagist**: https://packagist.org/packages/hivellm/umicp

---

## 🚀 Publishing to Packagist

### Prerequisites

1. **Packagist Account**: https://packagist.org/register
2. **GitHub Repository**: https://github.com/hivellm/umicp
3. **Composer**: Installed locally

### Method 1: Automatic (Recommended)

Packagist automatically updates when you push Git tags (if webhook configured).

```bash
# Build and validate
./build.sh

# Publish (creates and pushes tag)
./publish.sh 0.1.3
```

### Method 2: Manual

```bash
# 1. Validate package
composer validate
php validate-package.php

# 2. Create Git tag
git tag -a v0.1.3 -m "Release v0.1.3"

# 3. Push tag
git push origin v0.1.3

# 4. Wait for Packagist auto-update (or trigger manually)
```

---

## 📋 First-Time Setup

### 1. Submit Package to Packagist

1. Go to: https://packagist.org/packages/submit
2. Enter repository URL: `https://github.com/hivellm/umicp`
3. Click "Check" and "Submit"

### 2. Configure GitHub Webhook (Auto-Updates)

**Option A: Automatic (Recommended)**

1. Go to Packagist package settings
2. Click "GitHub Service Hook" button
3. Authorize Packagist on GitHub
4. Webhook will be configured automatically

**Option B: Manual**

1. Go to GitHub repository → Settings → Webhooks
2. Add webhook:
   - URL: `https://packagist.org/api/github?username=YOUR_PACKAGIST_USERNAME`
   - Content type: `application/json`
   - Events: "Just the push event"

### 3. Enable Auto-Update

In Packagist package settings:
- Enable "Auto-update"
- Configure update frequency (default: hourly)

---

## 📝 Release Checklist

Before publishing:

- [ ] Update CHANGELOG.md
- [ ] Run tests: `composer test`
- [ ] Validate: `composer validate --strict`
- [ ] Check code style: `composer lint`
- [ ] Run static analysis: `composer analyse`
- [ ] Verify implementation: `php verify-implementation.php`
- [ ] Build package: `./build.sh`
- [ ] Commit changes
- [ ] Create and push tag: `./publish.sh VERSION`

---

## 🔧 Scripts

### build.sh / build.ps1

Validates and prepares the package:

```bash
# Linux/macOS/WSL
./build.sh

# Windows PowerShell
.\build.ps1
```

**What it does:**
- ✅ Checks PHP version and extensions
- ✅ Validates composer.json
- ✅ Installs dependencies
- ✅ Runs linting (PSR-12)
- ✅ Runs static analysis (PHPStan)
- ✅ Runs tests
- ✅ Verifies implementation

### publish.sh / publish.ps1

Creates Git tag and publishes:

```bash
# Linux/macOS/WSL
./publish.sh 0.1.3

# Windows PowerShell
.\publish.ps1 -Version 0.1.3
```

**What it does:**
- 🏷️ Creates annotated Git tag
- 📤 Pushes tag to GitHub
- 🔄 Triggers Packagist auto-update
- ✅ Confirms publication

### validate-package.php

Validates package structure:

```bash
php validate-package.php
```

---

## 📊 Package Statistics

- **Classes**: 31 PHP classes
- **Tests**: 115+ tests (95% coverage)
- **Examples**: 6 working demos
- **Documentation**: 10 markdown files

---

## 🌐 Installation

After publishing, users can install with:

```bash
composer require hivellm/umicp
```

Or specific version:

```bash
composer require hivellm/umicp:^0.1.3
```

---

## 🔗 Resources

- **Packagist**: https://packagist.org/packages/hivellm/umicp
- **GitHub**: https://github.com/hivellm/umicp
- **Documentation**: https://github.com/hivellm/umicp/tree/main/bindings/php/docs
- **Issues**: https://github.com/hivellm/umicp/issues

---

## 📞 Support

- **Email**: team@hivellm.org
- **GitHub Discussions**: https://github.com/hivellm/umicp/discussions
- **Discord**: https://discord.gg/hivellm

---

**Last Updated**: 2025-10-11

